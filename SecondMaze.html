<!DOCTYPE html>
<html lang="en">
<head>
    <!--Pictures were generated by Midjourney-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Second Maze</title>
    <style>
        body{
            margin: 0;
            padding: 0;
            font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }
        h1, h2, .display{
            margin-left: auto;
            margin-right: auto;
        }
        h1{
            font-size: 100px;
            color: white;
        }
        h2{
            font-size: 65px;
            color: white;
        }
        button{
            background-color:lightgray;
        }
        button:hover{
            background-color:rgb(168, 168, 173);
            color: white;
        }

        .title{
            background-image: url(Cliffs.JPG);
            background-attachment: fixed;
            background-repeat: no-repeat;
            background-size: cover;
            top: 0;
            height:  100vh;
            box-shadow: 0px 10px 10px darkgrey;
        }

        .display{
            display: grid;
            grid-template-rows:  repeat(2, 1fr);
            grid-template-columns:  repeat(4, 1fr);
            width: 75%;
            border: 7px solid rgb(53, 63, 63);
            background-color: rgb(53, 63, 63);
            min-width: 250px;
        }
        #mazeImage{
            grid-row-start: 1;
            grid-row-end: 3;
            grid-column-start: 1;
            grid-column-end: 4;
            width: 100%;
        }
        #left{
            grid-row-start: 3;
            grid-row-end: 4;
            grid-column-start: 1;
            grid-column-end: 2;
            min-height: 30px;
            max-height: 40px;
        } 
        #straight{
            grid-row-start: 3;
            grid-row-end: 4;
            grid-column-start: 2;
            grid-column-end: 3;
            min-height: 30px;
            max-height: 40px;
        } 
        #right{
            grid-row-start: 3;
            grid-row-end: 4;
            grid-column-start: 2;
            grid-column: 3;
            min-height: 30px;
            max-height: 40px;
        }
        .sidepanel{
            grid-row-start: 1;
            grid-row-end: 3;
            grid-column-start: 4;
            grid-column-end: 5;
            background-color:rgb(53, 63, 63);
            color: white;
            overflow: auto;
            overflow-x: hidden;
        }
        #notes{
            max-width: 100%;
            min-width: 80%;
            min-height: 25%;
            max-height: 45%;
            visibility: hidden;
        }
        #key{
            background-color: white;
            color: black;
            max-width: 90%;
            min-width: 80%;
            min-height: 25%;
            max-height: 45%;
            visibility: hidden;
            overflow: auto;
        }

        .instructions{
            margin: 10px;
        }

    </style>
</head>
<body>
    <div class="title">
        <br>
        <br>
        <br>
        <h1 align="center">Stage Two:</h1>
        <h2 align = "center">Up the Mountain</h2>
        <br>
    </div>
    <br>
    <br>
    <div class="instructions">
        <p margin="20px">Welcome to the second maze!  Click different spots on the image to discover what you can, and use the buttons to navigate through the maze.  Be careful, though--one wrong move and you'll have to start over!</p>
    </div>

    <div class="display" align="center">
        <img id="mazeImage" src="GrayOneFinal.JPG">
        <button id="left" >Left</button>
        <button id="straight">Straight</button>
        <button id="right">Right</button>
        <div class="sidepanel" id="sidePanel">
            <p>Clues:  </p>
            <textarea id="notes">Number-letter, shift 4 right for standard encryption:  14, 5, 3, 4, 16, 22 &#13;&#10Note:  There may be extra letters to prevent shortcuts</textarea>
            <div id="key">To use the key, find the number associated with each letter (A=1, B=2, etc.) and count through each letter in the message until you reach that number.  Do not include spaces or commas.  Once you have reached that number, write down the letter and move on to the next letter, starting at 1 again.  Once you have reached the end of the key, start over with the first letter until you reach the end of the message.Here is an example:<br>
                Key is ABC.  <b>H</b>Q<b>E</b>AB<b>LL</b>I<b>O</b> –message is “Hello”
            </div>
        </div>
    </div>



    <script defer>
        let mazeImage = document.getElementById("mazeImage");
        let notes = document.getElementById("notes");
        let key = document.getElementById("key");
        let left = document.getElementById("left");
        let straight = document.getElementById("straight");
        let right = document.getElementById("right");

        let scene = 1;
        //Fixing display
            let sidepanel = document.getElementById("sidePanel");
            sidepanel.style.maxHeight = mazeImage.height +"px";

        mazeImage.onclick = function(){
            let x = event.offsetX;
            let y = event.offsetY;
            console.log(x, y);
            console.log(mazeImage.width +", "+ mazeImage.height);
            if (scene == 1){
                //note
                if(x>0.06*mazeImage.width && x<0.23*mazeImage.width && y>0.25*mazeImage.height && y<0.32*mazeImage.height){
                    console.log("Success!");
                    notes.style.visibility = "visible";
                }
            }
            if (scene == 2){
                //notes
                if(x>0.51*mazeImage.width && x<0.57*mazeImage.width && y>0.25*mazeImage.height && y<0.35*mazeImage.height){
                    notes.style.visibility = "visible";
                }
            }
            if (scene == 3){
                //notes
                if(x>0 && x<0.05*mazeImage.width && y>0.17*mazeImage.height && y<0.29*mazeImage.height){
                    notes.style.visibility = "visible";
                }
            }
            if (scene == 4){
                //notes
                if(x>0.4*mazeImage.width && x<0.44*mazeImage.width && y>0.15*mazeImage.height && y<0.2*mazeImage.height){
                    notes.style.visibility = "visible";
                }
                //clue--next round
                if(x>0.4*mazeImage.width && x<0.44*mazeImage.width && y>0.03*mazeImage.height && y<0.09*mazeImage.height){
                    key.style.visibility = "visible";
                }
            }
        }

        let fail = function(){
            scene = 100;
            mazeImage.src = 'DeadEndThree.JPG';
            notes.style.visibility = "visible";
            key.style.visibility = "hidden";
            notes.value = "Sorry, it looks like you hit a dead end!  Refresh the page to try again.";
            left.style.visibility = "hidden";
            straight.style.visibility = "hidden";
            right.style.visibility = "hidden";
        }
        let clearInventory = function(){
            notes.style.visibility = "hidden";
            key.style.visibility = "hidden";
        }
        left.onclick = function(){//fail
            fail();
        }
        straight.onclick = function(){//fail
            fail();
        }
        right.onclick = function(){//Success!
            //Setting up the scene
            mazeImage.src = "GrayTwoFinal.JPG";
            scene = 2;
            clearInventory();
            notes.value = "Shift 2 left for standard encryption:  21, 22, 20, 3, 11, 9, 20, 22";
            //Navigation
            left.onclick = function(){//fail2
                fail();
            }
            straight.onclick = function(){//success2
                //Setting up the scene
                mazeImage.src = "GrayThreeFinal.JPG";
                scene = 3;
                clearInventory();
                notes.value = "Shift 3 right for standard encryption:  2, 15, 9, 2, 3, 17";
                //Navigation
                left.onclick = function(){//success3
                    //Setting up the scene
                    mazeImage.src = "GrayFourFinal.JPG";
                    scene = 4;
                    clearInventory();
                    notes.value = "Shift 15 right for standard encryption:  10, 3, 20, 18, 19, 5 \nShift 1 left:  20, 16, 14, 6, 21, 9, 10, 15, 8 / 10, 14, 17, 16, 19, 21, 2, 15, 21 / 10, 20 / 9, 6, 19, 6 / 4, 13, 10, 4, 12 / 8, 16, 13, 5 / 19, 6, 4, 21, 2, 14, 8, 13, 6";
                    //Navigation
                    left.onclick = function(){//fail4
                        fail();
                    }
                    straight.onclick = function(){//fail4
                        fail();
                    }
                    right.onclick = function(){//Success!!
                        mazeImage.src = "GrayEnd.JPG";
                        scene = 5;
                        clearInventory();
                        notes.style.visibility = "visible";
                        notes.value = "Congratulations, you have completed stage two of the maze!  Click the link to continue.";
                        left.style.visibility = "hidden";
                        straight.innerHTML = "<a href='https://lainey-moffett.github.io/SavingWinterTwo/ThirdMaze'>Click here to move on</a>";
                        right.style.visibility = "hidden";
                        straight.onclick = function(){
                            console.log("Make sure you are clicking the text of the button");
                        }

                    }
                }
                straight.onclick = function(){//fail3
                    fail();
                }
                right.onclick = function(){//fail3
                    fail();
                }

            }
            right.onclick = function(){//fail2
                fail();
            }
        }

    </script>
</body>
</html>
